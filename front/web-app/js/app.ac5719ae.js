(function(t){function e(e){for(var n,o,i=e[0],c=e[1],u=e[2],d=0,v=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&v.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(v.length)v.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},s=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mt-4 ",attrs:{id:"app"}},[r("div",{staticClass:"row border-bottom pb-2"},[r("div",{staticClass:"col"},[r("router-link",{attrs:{to:"/servers"}},[t._v("Home")]),"/databases"===t.$route.path?r("router-link",{attrs:{to:"/databases"}},[t._v("/databases")]):t._e()],1)]),r("router-view")],1)},s=[],o={name:"App"},i=o,c=r("2877"),u=Object(c["a"])(i,a,s,!1,null,null,null),l=u.exports,d=r("2f62"),v=(r("99af"),r("96cf"),r("1da1")),f=r("bc3a"),g={actions:{fetchDataBasesAPI:function(t,e){return Object(v["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.DBid,a=e.url,r.next=3,f["get"]("http://".concat(a,".ngrok.io/servers/databases/").concat(n)).then((function(t){return t.data}));case 3:s=r.sent,t.commit("fetchDataBases",s);case 5:case"end":return r.stop()}}),r)})))()}},mutations:{fetchDataBases:function(t,e){t.DBs=e}},getters:{getDataBases:function(t){return t.DBs}},state:{DBs:[]}},p={actions:{fetchServers:function(t,e){return Object(v["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,f["get"]("http://".concat(e,".ngrok.io/servers")).then((function(t){return t.data}));case 2:n=r.sent,t.commit("putServers",n);case 4:case"end":return r.stop()}}),r)})))()},setUrlA:function(t,e){t.commit("setUrl",e)},setCurrentServerA:function(t,e){var r=e.id,n=e.hostname;t.commit("setServerIdM",{id:r,hostname:n})}},mutations:{putServers:function(t,e){t.servers=e},setServerIdM:function(t,e){var r=e.id,n=e.hostname;t.currentServer={id:r,hostname:n}},setUrl:function(t,e){t.url=e}},getters:{getServers:function(t){return t.servers},getCurrentServer:function(t){return t.currentServer},getLoginStatus:function(t){return t.servers[2]?"true":"none"},getUrl:function(t){return t.url}},state:{servers:[],currentServer:{},url:""}},m={actions:{fetchpgBadgerAPI:function(t,e){return Object(v["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.id,a=e.url,r.next=3,f["get"]("http://".concat(a,".ngrok.io/server/databases/pgBadger/").concat(n)).then((function(t){return t.data}));case 3:s=r.sent,t.commit("fetchpgBadger",s);case 5:case"end":return r.stop()}}),r)})))()},putNewpgBadgerAPI:function(t,e){return Object(v["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.firstdate,a=e.lastdate,s=e.dbid,o=e.srvid,i=e.url,r.next=3,f["put"]("http://".concat(i,".ngrok.io/PutDataForNewpgBadger"),{firstdate:n,lastdate:a,dbid:s,srvid:o}).then((function(t){return t.data}));case 3:c=r.sent,t.commit("fetchpgBadger",c);case 5:case"end":return r.stop()}}),r)})))()}},mutations:{fetchpgBadger:function(t,e){t.pgBadger=e}},getters:{getpgBadger:function(t){return t.pgBadger}},state:{pgBadger:{}}};n["a"].use(d["a"]);var h=new d["a"].Store({modules:{DBs:g,Servers:p,PGBadger:m}}),b=r("8c4f"),_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mt-2"},[t._m(0),t._l(t.getServers,(function(e){return r("div",{key:e.id,staticClass:"row mt-1 mb-1  "},[r("div",{staticClass:"col-3",on:{click:function(){t.setCurrentServerA({id:e.id,hostname:e.hostname})}}},[r("router-link",{attrs:{to:"/databases"}},[t._v(t._s(e.hostname))])],1),r("div",{staticClass:"col-3"},[t._v(t._s(e.alias))]),r("div",{staticClass:"col-3"},[t._v(t._s(e.id))])])}))],2)},w=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-3"},[t._v("Servername")]),r("div",{staticClass:"col-3"},[t._v("Description ")]),r("div",{staticClass:"col-3"},[t._v("Host")])])}],C=r("5530"),S={name:"ServersPage",methods:Object(C["a"])({},Object(d["b"])(["setCurrentServerA","fetchServers"])),computed:Object(C["a"])({},Object(d["c"])(["getServers","getUrl"])),created:function(){this.fetchServers(this.getUrl)}},B=S,y=Object(c["a"])(B,_,w,!1,null,"7caf65b0",null),O=y.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"container"},[r("p",{staticClass:"text-center display-4"},[t._v("Databases on server:"+t._s(t.getCurrentServer.hostname))]),t._l(t.getDataBases,(function(e,n){return r("div",{key:n,staticClass:"row"},[r("div",{staticClass:"col-3"},[t._v(t._s(e.datname))]),r("div",{staticClass:"col-3"},[t._v(t._s(e.oid))]),r("div",{staticClass:"col-3"})])}))],2),r("div",{staticClass:"container mt-5"},[r("p",{staticClass:"text-center display-4"},[t._v("PgBadgerReports")]),r("div",{staticClass:"row mt-4 mb-4"},[r("div",{staticClass:"col"},[r("select",{on:{change:function(e){t.setdatname(e.target.value)}}},[r("option",{attrs:{value:"all",selected:""}},[t._v("All databases")]),t._l(t.getDataBases,(function(e,n){return r("option",{key:n,domProps:{value:e.oid}},[t._v(t._s(e.datname))])}))],2)]),r("div",{staticClass:"col"},[t._v("From"),r("datetime",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},model:{value:t.firstdate,callback:function(e){t.firstdate=e},expression:"firstdate"}})],1),r("div",{staticClass:"col"},[t._v("To"),r("datetime",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},model:{value:t.lastdate,callback:function(e){t.lastdate=e},expression:"lastdate"}})],1),r("div",{staticClass:"col"},[r("button",{on:{click:t.sendRequestForNewPgBadger}},[t._v("Add new report request")])])])]),t._m(0),t._l(t.getpgBadger,(function(t,e){return r("PGBadger",{key:e,attrs:{alias:t.alias,status:t.status,datname:t.datname,begin:t.Begin_time,end:t.End_time,id:t.id,filename:t.filename}})}))],2)},P=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-3"},[t._v("Server")]),r("div",{staticClass:"col-3"},[t._v("Database")]),r("div",{staticClass:"col-3"},[t._v("TimeFrame")]),r("div",{staticClass:"col-2"},[t._v("Status")])])}],k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"col-3"},[t._v(t._s(t.alias))]),r("div",{staticClass:"col-3"},[t._v(t._s(t.datname))]),r("div",{staticClass:"col-3"},[t._v(t._s(t.begin)+"\\"+t._s(t.end)+" ")]),r("div",{staticClass:"col-2"},["Ready"===t.status?r("a",{on:{click:function(){t.downloadWithAxios(t.id,t.filename)}}},[t._v("Ready")]):t._e(),"Pending"===t.status?r("a",[t._v("Pending")]):t._e()])])])},x=[],A=(r("a9e3"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),{name:"PGBadger",props:{alias:String,datname:String,begin:String,end:String,status:String,id:Number,filename:String},computed:Object(C["a"])({},Object(d["c"])(["getpgBadger","getCurrentServer","getUrl"])),methods:Object(C["a"])({},Object(d["b"])(["fetchpgBadgerAPI"]),{forceFileDownload:function(t,e){var r=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=r,n.setAttribute("download","".concat(e,".gz")),document.body.appendChild(n),n.click()},downloadWithAxios:function(t,e){var r=this;f({method:"get",url:"http://".concat(this.getUrl,".ngrok.io/getfile/").concat(t),responseType:"arraybuffer"}).then((function(t){r.forceFileDownload(t,e),console.log(t)})).catch((function(){return console.log("error occured")}))}}),mounted:function(){var t=this;"Pending"===this.$props.status&&setInterval((function(){t.fetchpgBadgerAPI(t.getCurrentServer.id)}),5e3)},destroyed:function(){clearInterval()}}),D=A,R=Object(c["a"])(D,k,x,!1,null,null,null),U=R.exports,I=r("859b"),$={name:"DBsPage",components:{PGBadger:U,datetime:I["Datetime"]},data:function(){return{status:"ready",firstdate:"",lastdate:"",dbid:"all"}},methods:Object(C["a"])({},Object(d["b"])(["fetchDataBasesAPI","fetchpgBadgerAPI","putNewpgBadgerAPI"]),{setdatname:function(t){this.dbid=t},sendRequestForNewPgBadger:function(){this.putNewpgBadgerAPI({firstdate:this.firstdate,lastdate:this.lastdate,dbid:this.dbid,srvid:this.getCurrentServer.id,url:this.getUrl})}}),computed:Object(C["a"])({},Object(d["c"])(["getDataBases","getCurrentServer","getpgBadger","getUrl"])),mounted:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){console.log(t.getUrl),t.fetchDataBasesAPI({DBid:t.getCurrentServer.id,url:t.getUrl}),t.fetchpgBadgerAPI({id:t.getCurrentServer.id,url:t.getUrl})}),100);case 1:case"end":return e.stop()}}),e)})))()}},E=$,M=Object(c["a"])(E,j,P,!1,null,null,null),F=M.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.urltoconnect,expression:"urltoconnect"}],staticClass:"input-group",domProps:{value:t.urltoconnect},on:{input:function(e){e.target.composing||(t.urltoconnect=e.target.value)}}}),r("button",{staticClass:"btn btn-default",on:{click:function(){t.fetchServers(t.urltoconnect),t.setUrlA(t.urltoconnect)}}},[t._v(" Connect ")]),"true"===t.getLoginStatus?r("p",[t._v("All okay")]):t._e(),"none"===t.getLoginStatus?r("p",[t._v("You are not connected")]):t._e()])},N=[],T={name:"LoginForm",data:function(){return{urltoconnect:""}},computed:Object(d["c"])(["getLoginStatus"]),methods:Object(C["a"])({},Object(d["b"])(["fetchServers","setUrlA"])),updated:function(){"true"===this.getLoginStatus&&(console.log("WE TRY"),this.$router.push({path:"/servers"}))}},H=T,G=Object(c["a"])(H,L,N,!1,null,null,null),q=G.exports;r("d355");n["a"].config.productionTip=!1,n["a"].use(d["a"]),n["a"].use(b["a"]),n["a"].use(I["Datetime"]);var W=[{path:"/",component:q},{path:"/servers",component:O},{path:"/databases",component:F}],J=new b["a"]({routes:W});new n["a"]({router:J,store:h,render:function(t){return t(l)}}).$mount("#app")}});
//# sourceMappingURL=app.ac5719ae.js.map